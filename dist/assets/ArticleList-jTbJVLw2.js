import{l as y,a as w}from"./useArticleIndex-BnDR0Dmu.js";import{d as _,e as b,l as p,c as n,o as l,F as v,m as A,a as c,t as u,B}from"./vendor-BYORPvVJ.js";const D={class:"article-list-container flex list-none flex-col gap-4"},S=["onClick"],k={class:"text-11 ml-16 whitespace-nowrap text-gray-400"},T=_({__name:"ArticleList",props:{category:{},restoreScroll:{type:Boolean}},emits:["selectArticle","scrollRestored"],setup(m,{emit:f}){const a=m,i=f,r=b([]);let d=0;const g=async()=>{const o=++d,s=[];try{(a.category===null?await y():await w(a.category)).forEach(t=>{s.push({name:t.articlePath,path:t.articlePath,updateDate:t.updateDate})})}catch(e){console.error("Failed to load article index:",e)}o===d&&(s.sort((e,t)=>{const x=new Date(e.updateDate).getTime();return new Date(t.updateDate).getTime()-x}),r.value=s)};p(()=>a.category,()=>{g()},{immediate:!0});const h=async()=>{a.restoreScroll&&(await B(),setTimeout(()=>{const o=sessionStorage.getItem("articleListScrollPosition");o&&(window.scrollTo({top:parseFloat(o),behavior:"instant"}),sessionStorage.removeItem("articleListScrollPosition")),i("scrollRestored")},100))};return p(()=>r.value,()=>{h()}),(o,s)=>(l(),n("ul",D,[(l(!0),n(v,null,A(r.value,e=>(l(),n("li",{key:e.path},[c("button",{onClick:t=>i("selectArticle",e.path),class:"flex w-full cursor-pointer items-center justify-between rounded border-none bg-transparent px-8 py-4 text-left text-blue-500 transition-colors duration-200 hover:bg-blue-50"},[c("span",null,u(e.name.split("/").pop()),1),c("span",k,u(e.updateDate),1)],8,S)]))),128))]))}});export{T as default};
